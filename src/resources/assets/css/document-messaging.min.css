.document-messaging-fixed,.document-messaging-panel,.individual-chat-window{contain:layout style paint!important;isolation:isolate!important}:root{--messaging-primary:#10b981;--messaging-primary-hover:#059669;--messaging-secondary:#6b7280;--messaging-background:#fff;--messaging-surface:#f8fafc;--messaging-border:#e2e8f0;--messaging-text:#1e293b;--messaging-text-light:#64748b;--messaging-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);--messaging-shadow-lg:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);--messaging-radius:8px;--messaging-radius-lg:12px;--messaging-transition:all 0.2s cubic-bezier(0.4,0,0.2,1)}[data-theme=dark]{--messaging-background:#1e293b;--messaging-surface:#334155;--messaging-border:#475569;--messaging-text:#f1f5f9;--messaging-text-light:#94a3b8}[data-theme=dark] .document-messaging-fixed{position:fixed!important;bottom:20px!important;right:20px!important;z-index:4!important}[data-theme=dark] .document-messaging-panel{position:fixed!important;bottom:80px!important;right:20px!important;z-index:3!important}[data-theme=dark] .individual-chat-window{position:fixed!important;bottom:20px!important;right:420px!important;z-index:2!important}[data-theme=dark] .messaging-button{background:var(--messaging-background)!important;border-color:var(--messaging-border)!important;box-shadow:0 10px 15px -3px rgba(0,0,0,.3),0 4px 6px -2px rgba(0,0,0,.2)!important}[data-theme=dark] .messaging-button:hover{box-shadow:0 20px 25px -5px rgba(0,0,0,.4),0 10px 10px -5px rgba(0,0,0,.2)!important}[data-theme=dark] .document-messaging-panel,[data-theme=dark] .individual-chat-window{background:var(--messaging-background)!important;border-color:var(--messaging-border)!important;box-shadow:0 10px 15px -3px rgba(0,0,0,.3),0 4px 6px -2px rgba(0,0,0,.2)!important}.document-messaging-fixed{position:fixed!important;bottom:20px!important;right:20px!important;z-index:4!important;transform:none!important;will-change:transform!important}.messaging-button{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--messaging-background);border:1px solid var(--messaging-border);border-radius:var(--messaging-radius-lg);box-shadow:var(--messaging-shadow-lg);cursor:pointer;transition:var(--messaging-transition);min-width:200px;backdrop-filter:blur(10px);transform-origin:center}.messaging-button:active{transform:scale(.98);transition:transform .1s cubic-bezier(.4,0,.2,1)}.messaging-button:hover{transform:translateY(-2px);box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);border-color:var(--messaging-primary)}.messaging-button__avatar{width:40px;height:40px;border-radius:50%;overflow:hidden;flex-shrink:0}.messaging-button__avatar img{width:100%;height:100%;object-fit:cover}.messaging-button__content{flex:1;display:flex;align-items:center;gap:8px}.messaging-button__text{font-size:14px;font-weight:600;color:var(--messaging-text)}.messaging-button__badge{background:#dc2626;color:#fff;font-size:12px;font-weight:600;padding:2px 6px;border-radius:10px;min-width:18px;text-align:center;line-height:1.2}.messaging-button__controls{display:flex;align-items:center;gap:4px;color:var(--messaging-text-light)}.messaging-button__controls i{font-size:16px;transition:all .3s cubic-bezier(.4,0,.2,1)}.messaging-button:hover .messaging-button__controls i{color:var(--messaging-primary)}.messaging-button__controls i:last-child{transition:transform .3s cubic-bezier(.4,0,.2,1)}.document-messaging-fixed[data-expanded=true] .messaging-button__controls i:last-child{transform:rotate(180deg)}.document-messaging-panel{position:fixed!important;bottom:80px!important;right:20px!important;width:380px;height:500px;background:var(--messaging-background);border:1px solid var(--messaging-border);border-radius:var(--messaging-radius-lg);box-shadow:var(--messaging-shadow-lg);display:flex;flex-direction:column;z-index:3!important;backdrop-filter:blur(10px);transform-origin:bottom right;animation:a .4s cubic-bezier(.34,1.56,.64,1)}@keyframes a{0%{opacity:0;transform:translateY(20px) scale(.8)}50%{opacity:.8;transform:translateY(-5px) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.messaging-panel__header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--messaging-border);background:var(--messaging-surface);border-radius:var(--messaging-radius-lg) var(--messaging-radius-lg) 0 0}.messaging-panel__title h3{font-size:16px;font-weight:600;color:var(--messaging-text);margin:0}.messaging-panel__controls{display:flex;align-items:center;gap:8px}.messaging-panel__control-btn{width:32px;height:32px;border:none;background:transparent;border-radius:6px;display:flex;align-items:center;justify-content:center;color:var(--messaging-text-light);cursor:pointer;transition:var(--messaging-transition)}.messaging-panel__control-btn:hover{background:var(--messaging-border);color:var(--messaging-text)}.messaging-panel__control-btn i{font-size:16px}.messaging-panel__search{padding:16px 20px;border-bottom:1px solid var(--messaging-border)}.messaging-search{position:relative;display:flex;align-items:center}.messaging-search i{position:absolute;left:12px;color:var(--messaging-text-light);font-size:16px;z-index:1}.messaging-search__input{width:100%;padding:10px 12px 10px 40px;border:1px solid var(--messaging-border);border-radius:var(--messaging-radius);background:var(--messaging-surface);color:var(--messaging-text);font-size:14px;transition:var(--messaging-transition)}.messaging-search__input:focus{outline:none;border-color:var(--messaging-primary);box-shadow:0 0 0 3px rgba(16,185,129,.1)}.messaging-search__filter{position:absolute;right:8px;width:24px;height:24px;border:none;background:transparent;color:var(--messaging-text-light);cursor:pointer;border-radius:4px;display:flex;align-items:center;justify-content:center;transition:var(--messaging-transition)}.messaging-search__filter:hover{background:var(--messaging-border);color:var(--messaging-text)}.messaging-panel__tabs{display:flex;padding:0 20px;border-bottom:1px solid var(--messaging-border);background:var(--messaging-surface)}.messaging-tab{flex:1;padding:12px 8px;border:none;background:transparent;color:var(--messaging-text-light);font-size:13px;font-weight:500;cursor:pointer;transition:var(--messaging-transition);position:relative;display:flex;align-items:center;justify-content:center;gap:6px}.messaging-tab:hover{color:var(--messaging-text);background:rgba(16,185,129,.05)}.messaging-tab--active{color:var(--messaging-primary);background:rgba(16,185,129,.1)}.messaging-tab--active:after{content:"";position:absolute;bottom:0;left:0;right:0;height:2px;background:var(--messaging-primary)}.messaging-tab__badge{background:#dc2626;color:#fff;font-size:10px;font-weight:600;padding:1px 4px;border-radius:8px;min-width:14px;text-align:center;line-height:1.2}.messaging-panel__threads{flex:1;overflow-y:auto;padding:8px 0}.messaging-thread{display:flex;align-items:center;gap:12px;padding:12px 20px;cursor:pointer;transition:var(--messaging-transition);border-bottom:1px solid var(--messaging-border);animation:b .3s ease-out forwards;opacity:0;transform:translateY(10px)}.messaging-thread:first-child{animation-delay:.1s}.messaging-thread:nth-child(2){animation-delay:.15s}.messaging-thread:nth-child(3){animation-delay:.2s}.messaging-thread:nth-child(4){animation-delay:.25s}.messaging-thread:nth-child(5){animation-delay:.3s}.messaging-thread:nth-child(n+6){animation-delay:.35s}@keyframes b{to{opacity:1;transform:translateY(0)}}.messaging-thread:hover{background:var(--messaging-surface)}.messaging-thread__avatar{position:relative;width:48px;height:48px;border-radius:50%;overflow:hidden;flex-shrink:0}.messaging-thread__avatar img{width:100%;height:100%;object-fit:cover}.messaging-thread__status{position:absolute;bottom:2px;right:2px;width:12px;height:12px;border-radius:50%;border:2px solid var(--messaging-background)}.messaging-thread__status--online{background:#10b981}.messaging-thread__status--offline{background:var(--messaging-text-light)}.messaging-thread__content{flex:1;min-width:0}.messaging-thread__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}.messaging-thread__name{font-size:14px;font-weight:600;color:var(--messaging-text);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.messaging-thread__category-indicator{width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.messaging-thread__category-indicator i{font-size:10px;color:#fff}.messaging-thread__message{font-size:13px;color:var(--messaging-text-light);margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.messaging-thread__meta{display:flex;flex-direction:column;align-items:flex-end;gap:4px;flex-shrink:0}.messaging-thread__time{font-size:12px;color:var(--messaging-text-light)}.messaging-thread__unread{background:var(--messaging-primary);color:#fff;font-size:11px;font-weight:600;padding:2px 6px;border-radius:10px;min-width:16px;text-align:center;line-height:1.2}.messaging-thread__empty{padding:40px 20px;text-align:center;color:var(--messaging-text-light)}.messaging-thread__empty p{margin:0;font-size:14px}.individual-chat-window{position:fixed!important;bottom:20px!important;right:420px!important;width:350px;height:500px;background:var(--messaging-background);border:1px solid var(--messaging-border);border-radius:var(--messaging-radius-lg);box-shadow:var(--messaging-shadow-lg);display:flex;flex-direction:column;z-index:2!important;backdrop-filter:blur(10px);transform-origin:bottom right;animation:c .35s cubic-bezier(.25,.46,.45,.94)}@keyframes c{0%{opacity:0;transform:translateX(30px) scale(.85)}60%{opacity:.9;transform:translateX(-2px) scale(1.01)}to{opacity:1;transform:translateX(0) scale(1)}}.individual-chat__header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid var(--messaging-border);background:var(--messaging-surface);border-radius:var(--messaging-radius-lg) var(--messaging-radius-lg) 0 0}.individual-chat__header-left{display:flex;align-items:center;gap:12px}.individual-chat__avatar{width:40px;height:40px;border-radius:50%;overflow:hidden;flex-shrink:0}.individual-chat__avatar img{width:100%;height:100%;object-fit:cover}.individual-chat__info h3{font-size:14px;font-weight:600;color:var(--messaging-text);margin:0}.individual-chat__info p{font-size:12px;color:var(--messaging-text-light);margin:0}.individual-chat__header-right{display:flex;align-items:center;gap:8px}.individual-chat__connection-status{margin-right:8px}.connection-status{display:flex;align-items:center;gap:4px;font-size:11px;padding:4px 8px;border-radius:12px;font-weight:500}.connection-status--connected{background:rgba(16,185,129,.1);color:var(--messaging-primary)}.connection-status--loading{background:rgba(59,130,246,.1);color:#3b82f6}.connection-status--disconnected{background:rgba(220,38,38,.1);color:#dc2626}.connection-retry-btn{width:16px;height:16px;border:none;background:transparent;color:inherit;cursor:pointer;border-radius:3px;display:flex;align-items:center;justify-content:center;transition:var(--messaging-transition)}.connection-retry-btn:hover{background:rgba(0,0,0,.1)}.individual-chat__control-btn{width:28px;height:28px;border:none;background:transparent;border-radius:6px;display:flex;align-items:center;justify-content:center;color:var(--messaging-text-light);cursor:pointer;transition:var(--messaging-transition)}.individual-chat__control-btn:hover{background:var(--messaging-border);color:var(--messaging-text)}.individual-chat__control-btn i{font-size:14px}.individual-chat__messages{flex:1;overflow-y:auto;padding:16px 20px;display:flex;flex-direction:column;gap:12px}.individual-chat__message{display:flex;gap:8px;align-items:flex-start}.individual-chat__message--outgoing{flex-direction:row-reverse}.individual-chat__message--system{justify-content:center}.individual-chat__message-avatar{position:relative;width:32px;height:32px;border-radius:50%;overflow:hidden;flex-shrink:0}.individual-chat__message-avatar img{width:100%;height:100%;object-fit:cover}.individual-chat__message-category-badge{position:absolute;bottom:-2px;right:-2px;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid var(--messaging-background)}.individual-chat__message-category-badge i{font-size:8px;color:#fff}.individual-chat__message-bubble{max-width:70%;padding:10px 14px;border-radius:var(--messaging-radius-lg);background:var(--messaging-surface);border:1px solid var(--messaging-border)}.individual-chat__message--outgoing .individual-chat__message-bubble{background:var(--messaging-primary);color:#fff;border-color:var(--messaging-primary)}.individual-chat__message--thread-owner .individual-chat__message-bubble{border-left:3px solid var(--category-color)}.individual-chat__message-text{font-size:13px;line-height:1.4;margin:0 0 6px;word-wrap:break-word}.individual-chat__message-meta{display:flex;align-items:center;justify-content:space-between;gap:8px}.individual-chat__message-time{font-size:11px;opacity:.7}.individual-chat__message-status{display:flex;align-items:center}.individual-chat__message-status-icon{font-size:12px;opacity:.7}.individual-chat__category-selector{padding:12px 20px;border-bottom:1px solid var(--messaging-border);background:var(--messaging-surface)}.individual-chat__category-label{display:flex;align-items:center;gap:6px;margin-bottom:8px;font-size:12px;font-weight:500;color:var(--messaging-text-light)}.individual-chat__category-options{display:flex;gap:8px;flex-wrap:wrap}.individual-chat__category-option{display:flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--messaging-border);border-radius:16px;background:var(--messaging-background);cursor:pointer;transition:var(--messaging-transition);font-size:11px;font-weight:500}.individual-chat__category-option:hover{border-color:var(--category-color);background:rgba(var(--category-color),.05)}.individual-chat__category-option--selected{border-color:var(--category-color);background:rgba(var(--category-color),.1);color:var(--category-color)}.individual-chat__category-option-input{display:none}.individual-chat__category-option-indicator{width:16px;height:16px;border-radius:50%;background:var(--category-color);display:flex;align-items:center;justify-content:center;flex-shrink:0}.individual-chat__category-option-indicator i{font-size:8px;color:#fff}.individual-chat__category-option-label{white-space:nowrap}.individual-chat__input{padding:16px 20px;border-top:1px solid var(--messaging-border);background:var(--messaging-surface);border-radius:0 0 var(--messaging-radius-lg) var(--messaging-radius-lg)}.individual-chat__input-container{display:flex;align-items:flex-end;gap:8px;background:var(--messaging-background);border:1px solid var(--messaging-border);border-radius:var(--messaging-radius-lg);padding:8px}.individual-chat__input-field{flex:1;border:none;background:transparent;color:var(--messaging-text);font-size:13px;line-height:1.4;resize:none;outline:none;min-height:20px;max-height:80px;font-family:inherit}.individual-chat__input-field::placeholder{color:var(--messaging-text-light)}.individual-chat__input-actions{display:flex;align-items:center;gap:4px}.individual-chat__input-action-btn{width:28px;height:28px;border:none;background:transparent;border-radius:6px;display:flex;align-items:center;justify-content:center;color:var(--messaging-text-light);cursor:pointer;transition:var(--messaging-transition)}.individual-chat__input-action-btn:hover{background:var(--messaging-border);color:var(--messaging-text)}.individual-chat__input-action-btn i{font-size:14px}.individual-chat__input-send-btn{width:28px;height:28px;border:none;background:var(--messaging-primary);border-radius:6px;display:flex;align-items:center;justify-content:center;color:#fff;cursor:pointer;transition:var(--messaging-transition)}.individual-chat__input-send-btn:hover:not(:disabled){background:var(--messaging-primary-hover)}.individual-chat__input-send-btn:disabled{opacity:.5;cursor:not-allowed}.individual-chat__input-send-btn i{font-size:14px}@media (max-width:768px){.document-messaging-panel,.individual-chat-window{width:calc(100vw - 40px);right:20px;left:20px}.messaging-button{min-width:160px}}@media (max-width:480px){.document-messaging-fixed{bottom:10px;right:10px}.document-messaging-panel{bottom:70px;right:10px;left:10px;width:calc(100vw - 20px)}.individual-chat-window{bottom:10px;right:10px;left:10px;width:calc(100vw - 20px)}.messaging-button{min-width:140px;padding:10px 12px}.messaging-button__avatar{width:32px;height:32px}.messaging-button__text{font-size:13px}}